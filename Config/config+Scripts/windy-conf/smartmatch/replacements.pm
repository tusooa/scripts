package Scripts::Windy::Conf::smartmatch::replacements;
use Exporter;
use 5.012;
use utf8;
our @ISA = qw/Exporter/;
our @EXPORT = qw/$caller $replacements/;

# é£å¦¹çš„å„ç§ç§°å‘¼
my $myName = qr/(?:(?<!é£|é¢¨)(?:å°|è¥¿)?(?:é£|é¢¨)(?:å„¿)?(?:å¦¹(?:å­|å„¿|ç ¸|å¦¹)?|å„¿|é…±|å§{1,2})|å°é£å§¬|è¥¿é£å¾…äºº)/;
my $you = qr/(?:ä½ |ä¹ƒ(?:é…±)?|å­|æ±|å›|ä¾¬|å°”|è€Œ|æ±|é˜ä¸‹|é™›ä¸‹|æ®¿ä¸‹|è¶³ä¸‹)/;
my $me = qr/(?:æˆ‘|å’±(?:å®¶)?|åœ¨ä¸‹|äººå®¶|å¾(?:è¾ˆ)?|ä½™(?:ä¸€äºº)?|æœ•|å¯¡äºº|å­¤(?:ç‹)?|æœ¬.|æœ¬å°‘çˆ·|æœ¬å°å§)/;
my $head = qr/(?:å¤´|è„‘è¢‹(?:ç“œå­)?)/;
# è¡¨æƒ…
# wwwww, qwqwqqqqqq, 0 0 0, ououo
# è¿™åªæ˜¯å‡ ä¸ªä¾‹å­ï¼Œç»å¯¹ä¸æ˜¯å…”å«‚åœ¨å–èŒï¼Œå—¯ã€‚
my $emotion = qr/(?:w+|[PpQq](?:.[PpQq])+[PpQq]*|0(?:.0)+|[Oo](?:.[Oo])+|x+|-(?:.-)+|=(?:.=)+|ğŸ˜‚|h+|â˜†|\(\?Ï‰\?=\)|\|Ï‰\?`\)|Î£)/;
#æ ‡ç‚¹
my $punc = qr/(?:\s+|ï¼Ÿ|ã€‚|\?|\.|~|ï½|,|ï¼Œ|!|ï¼|\^|ã€|ã€‘|\[|\]|ï¼ˆ|\(|\)|ï¼‰|ã€Œ|ã€|â€œ|â€)/;

# å¹è¯
my $excl = qr/(?:å‘œ|å“Ÿ|å“¦|å–µ|å’©|å‘œ|å—|[å•Šé˜¿][å’§å‹’]?|å‘€|å“ª|å‘|å˜›|å’ª|å£æ„|å™«|å|åš±|å—¯|æ©|è¯¶å¤š?|æ¬¸|å“|å”‰|ç­‰|å™—|é“¥(?:çš„)?|è¿™|å¹¶|23{2,}(?:4*3*)*|6+|å“ˆ|è›¤|å‘µ|å’³|[ç§‘é¢—]{2,}|å“¼|å£äº¨|å”§|å•¥|yuki|å–‚|å§æ§½|woc|miuyi|ç•¥{3,})/;
my $excl_pre = qr/(?:[Tt][Mm]|(?:ç¥)?(?:ç‰¹(?:ä¹ˆ|å–µ)|(?:ä»–|å¥¹|å®ƒ)å¦ˆ)(?:çš„)?|æ‰€ä»¥(?:è¯´)?|è¯´æ¥|è¯è¯´(?:å›æ¥)?|è¯´å›æ¥|ç„¶è€Œ|(?:å¯|ä½†)(?:æ˜¯)?|åªæ˜¯|å› ä¸º|åªå› |ååˆ†|ç®€ç›´)/;
my $excl_post = qr/(?:å‘¢|å“‰|${me}ä¹Ÿ|çŸ£|$you|å§|äº†|[bp]u|çš„(?:æ ·å­|è¯´)?|desu|æäº†|æƒ¹)/;
my $excl_mid = qr/(?:)/;
# åŠ¨ä½œå’ŒçŠ¶æ€
my $status_line = qr/(?:æ‘Šæ‰‹|æ‚è„¸|è¹­(?:ä¸€ä¸‹)?|(?:ä¸€è„¸)?[æ‡µè’™]é€¼|åˆ’æ‰|åˆ’å»|æ‰“å‹¾|æ‰“é’©|(?:å¹¶)?ä¸|å†è§|(?:ä¸€è„¸)?ç”Ÿæ— å¯æ‹|å¤§?[è¯¯é›¾]|æŠ±[ç´§æŠ±ä½]?|ç´§ç´§æŠ±ä½|(?:æ‘¸{1,2}|æ‘¸ä¸€?ä¸‹å­?)${head}?|æ‰æ‰(?:$head|è„¸)?|ä¸¾é«˜é«˜|å¤§?ç¬‘|å“­)/;
my $emotion_post = qr/(?:$excl|$excl_post|$punc|$emotion|$myName)*(?:${punc}+${status_line}*(?:${punc}|$excl|$excl_post|$emotion)*)*/;
my $emotion_pre = qr/(?:(?:${punc}|$excl|$excl_pre|$emotion)*${status_line}*${punc}+)*?(?:$excl|$excl_pre|$punc|$emotion|$myName)*?/;
my $emotion_mid = qr/(?:$excl|$excl_mid|$punc|$emotion|$you)*/;
#my $suffix = qr/(?:å“ª|å‘|å‘€|å•Š|å–µ|$emotion)/;

our $caller = qr/$emotion_pre$myName$emotion_mid/;
our $replacements = {
    'æ ‡ç‚¹' => $punc,
    'é£å¦¹' => $caller,
    'å‰' => $emotion_pre,
    'å' => $emotion_post,
    'ä¸­' => $emotion_mid,
    'æˆ‘' => $me,
    'ä¸ºä»€ä¹ˆ' => qr/(?:ä¸º(?:ä»€ä¹ˆ|æ¯›|å–µ|å’©|ä½•|å•¥)|æ€ä¹ˆ?(?:èƒ½å¤Ÿ?|å¯ä»¥)?|å’‹)/,
    'ä½ ' => $you,
    'ä»€ä¹ˆ' => qr/(?:ä»€ä¹ˆ|ç¥é©¬|[ä»€ç¥][å–µæ‘¸]|å•¥å­?)/,
    'ä»¥å' => qr/(?:(?:ä»?ä»Š)?[å¾€ä»¥è€Œ]å|ä»Šå)/,
    'ä¸è¦' => qr/(?:åˆ«|ä¸è¦|è«(?:è¦)?|ä¸‡?[å‹¿æ¯‹])/,
    'ç§°å‘¼' => qr/(?:å«|ç§°å‘¼|å‘¼|å”¤|å–Š)/,
    'å°±å¥½' => qr/(?:å°±å¥½|å°±è¡Œ|å°±å¯ä»¥äº†?|å°±æ˜¯äº†?)/,
    'èµ°å¼€' => qr/(?:èµ°å¼€|å¥å‡¯)/,
    'd1' => 'ã€',
    'd2' => 'ã€‘',
    'd5' => '<',
    'd6' => '>',
    'æ¢è¡Œ' => "\n",
    'ä¸‹è®¯' => "\n\n",
    };

1;
